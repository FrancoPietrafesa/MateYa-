<!DOCTYPE html>

<html lang="es"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>MateYa! - Catálogo de Yerbas</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
          darkMode: "class",
          theme: {
            extend: {
              colors: {
                "primary": "#1a2d1e",
                "background-light": "#f6f7f7",
                "background-dark": "#161c17",
              },
              fontFamily: {
                "display": ["Manrope", "sans-serif"]
              },
              borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
            },
          },
        }
    </script>
<style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }
        body {
            font-family: 'Manrope', sans-serif;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen">
<!-- Top Navigation Bar -->
<header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-primary/10">
<div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between gap-4">
<!-- Logo -->
<div class="flex items-center gap-6 flex-shrink-0">
<a class="flex items-center" href="index.html">
<img alt="MateYa!" class="h-12 w-auto" src="assets/logo-mateya.svg"/>
</a>
<nav class="hidden md:flex items-center gap-5">
<a class="text-sm font-semibold hover:text-primary/70 transition-colors" href="index.html">Inicio</a>
<a class="text-sm font-semibold text-primary underline decoration-2 underline-offset-8" href="catalogo.html">Catálogo</a>
<a class="text-sm font-semibold hover:text-primary/70 transition-colors" href="packs.html">Packs</a>
<a class="text-sm font-semibold hover:text-primary/70 transition-colors" href="nosotros.html">Nosotros</a>
<a class="text-sm font-semibold hover:text-primary/70 transition-colors" href="faq.html">FAQ</a>
</nav>
</div>
<!-- Global Search -->
<div class="flex-1 max-w-2xl hidden md:block">
<div class="relative group">
<span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-primary/50 group-focus-within:text-primary transition-colors">search</span>
<input class="w-full bg-primary/5 dark:bg-primary/20 border-none rounded-lg pl-10 pr-4 h-10 focus:ring-2 focus:ring-primary/20 text-sm" placeholder="Busca tu marca o tipo de yerba..." type="text"/>
</div>
</div>
<!-- Actions -->
<div class="flex items-center gap-2">
<button class="p-2 hover:bg-primary/5 rounded-lg transition-colors relative" id="cart-button" type="button">
<span class="material-symbols-outlined">shopping_cart</span>
<span class="absolute top-1 right-1 w-4 h-4 bg-primary text-white text-[10px] flex items-center justify-center rounded-full font-bold" id="cart-count">0</span>
</button>
<button class="p-2 hover:bg-primary/5 rounded-lg transition-colors">
<span class="material-symbols-outlined">person</span>
</button>
</div>
</div>
</header>
<main class="max-w-7xl mx-auto px-4 py-8">
<div class="flex flex-col lg:flex-row gap-8">
<!-- Filters Sidebar -->
<aside class="lg:w-64 flex-shrink-0 space-y-8">
<!-- Intensity Filter -->
<div>
<h3 class="text-sm font-bold uppercase tracking-wider text-primary/60 mb-4 flex items-center gap-2">
<span class="material-symbols-outlined text-sm">filter_list</span> Intensidad
                    </h3>
<div class="space-y-2">
<label class="flex items-center gap-3 p-3 rounded-lg border border-primary/10 cursor-pointer hover:bg-primary/5 transition-all">
<input class="text-primary focus:ring-primary h-4 w-4" name="intensity" type="radio"/>
<div>
<p class="text-sm font-semibold">Suave</p>
<p class="text-xs text-primary/60">Sabor ligero y amigable</p>
</div>
</label>
<label class="flex items-center gap-3 p-3 rounded-lg border border-primary/10 cursor-pointer hover:bg-primary/5 transition-all">
<input checked="" class="text-primary focus:ring-primary h-4 w-4" name="intensity" type="radio"/>
<div>
<p class="text-sm font-semibold">Media</p>
<p class="text-xs text-primary/60">Equilibrado tradicional</p>
</div>
</label>
<label class="flex items-center gap-3 p-3 rounded-lg border border-primary/10 cursor-pointer hover:bg-primary/5 transition-all">
<input class="text-primary focus:ring-primary h-4 w-4" name="intensity" type="radio"/>
<div>
<p class="text-sm font-semibold">Fuerte</p>
<p class="text-xs text-primary/60">Sabor intenso y duradero</p>
</div>
</label>
</div>
</div>
<!-- Type Filter -->
<div>
<h3 class="text-sm font-bold uppercase tracking-wider text-primary/60 mb-4">Tipo</h3>
<div class="space-y-2">
<label class="flex items-center gap-2 cursor-pointer group">
<input checked="" class="rounded border-primary/20 text-primary focus:ring-primary" type="checkbox"/>
<span class="text-sm group-hover:text-primary transition-colors">Orgánica</span>
</label>
<label class="flex items-center gap-2 cursor-pointer group">
<input class="rounded border-primary/20 text-primary focus:ring-primary" type="checkbox"/>
<span class="text-sm group-hover:text-primary transition-colors">Barbacuá</span>
</label>
<label class="flex items-center gap-2 cursor-pointer group">
<input class="rounded border-primary/20 text-primary focus:ring-primary" type="checkbox"/>
<span class="text-sm group-hover:text-primary transition-colors">Compuesta</span>
</label>
<label class="flex items-center gap-2 cursor-pointer group">
<input checked="" class="rounded border-primary/20 text-primary focus:ring-primary" type="checkbox"/>
<span class="text-sm group-hover:text-primary transition-colors">Tradicional</span>
</label>
</div>
</div>
<!-- Brand Filter -->
<div>
<h3 class="text-sm font-bold uppercase tracking-wider text-primary/60 mb-4">Marca</h3>
<select class="w-full bg-transparent border-primary/10 rounded-lg text-sm focus:ring-primary focus:border-primary">
<option>Todas las marcas</option>
<option>Baldo</option>
<option>Sara</option>
<option>Canarias</option>
<option>Barao</option>
<option>Rei Verde</option>
<option>Esmeralda</option>
<option>Pindare</option>
</select>
</div>
<!-- Price Filter -->
<div>
<h3 class="text-sm font-bold uppercase tracking-wider text-primary/60 mb-4">Rango de Precio</h3>
<input class="w-full accent-primary bg-primary/10 h-1.5 rounded-full appearance-none cursor-pointer" type="range"/>
<div class="flex justify-between mt-2 text-xs text-primary/60">
<span>$500</span>
<span>$5000+</span>
</div>
</div>
<button class="w-full py-3 bg-primary text-slate-100 rounded-lg font-bold text-sm hover:bg-primary/90 transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary/10">
<span class="material-symbols-outlined text-sm">refresh</span> Limpiar filtros
                </button>
</aside>
<!-- Product Grid -->
<div class="flex-1">
<div class="flex items-center justify-between mb-8">
<h2 class="text-2xl font-bold text-primary dark:text-slate-100">Nuestro Catálogo <span class="text-sm font-normal text-primary/50 ml-2">(7 productos)</span></h2>
<div class="flex gap-2">
<button class="p-2 border border-primary/10 rounded-lg bg-primary/5 text-primary" id="grid-view-btn" type="button"><span class="material-symbols-outlined">grid_view</span></button>
<button class="p-2 border border-primary/10 rounded-lg hover:bg-primary/5 text-primary/40" id="list-view-btn" type="button"><span class="material-symbols-outlined">view_list</span></button>
</div>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="catalog-grid">
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Baldo" data-desc="Yerba de perfil intenso y sostenido, ideal para quienes prefieren amargor firme y larga duración del sabor.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Baldo" class="w-full h-full object-contain p-3" src="Yerbas/baldo.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Baldo</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$4.200</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Sara" data-desc="Blend uruguayo equilibrado, con cuerpo medio-alto y excelente rendimiento en cada cebada.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Sara" class="w-full h-full object-contain p-3" src="Yerbas/sara.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Sara</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$4.050</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Canarias" data-desc="Yerba clásica uruguaya de sabor intenso, baja acidez y gran permanencia del gusto.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Canarias" class="w-full h-full object-contain p-3" src="Yerbas/canarias.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Canarias</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$4.350</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Barao" data-desc="Yerba de corte fino y sabor robusto, recomendada para quienes buscan carácter fuerte.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Barao" class="w-full h-full object-contain p-3" src="Yerbas/barao.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Barao</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$3.950</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Rei Verde" data-desc="Perfil herbáceo y refrescante, con balance entre suavidad y buena intensidad en boca.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Rei Verde" class="w-full h-full object-contain p-3" src="Yerbas/rei%20verde.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Rei Verde</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$4.120</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Esmeralda" data-desc="Yerba de sabor limpio y persistente, ideal para un mate diario parejo y aromático.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Esmeralda" class="w-full h-full object-contain p-3" src="Yerbas/esmeralda.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Esmeralda</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$3.880</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
<div class="yerba-card cursor-pointer bg-white dark:bg-background-dark border border-primary/5 rounded-xl overflow-hidden hover:shadow-xl transition-all" data-yerba="Pindare" data-desc="Yerba de intensidad media-alta con buen cuerpo y final prolongado.">
<div class="h-40 bg-primary/5 overflow-hidden">
<img alt="Yerba Pindare" class="w-full h-full object-contain p-3" src="Yerbas/pindare.png"/>
</div>
<div class="p-4 space-y-4">
<div><p class="text-xs text-primary/50 uppercase font-bold tracking-widest">Yerba</p><h3 class="text-lg font-bold text-primary">Pindare</h3></div>
<div class="flex gap-2"><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary rounded-lg bg-primary/10 text-primary text-center" data-size="500gr" type="button">500gr</button><button class="size-btn flex-1 py-2 text-xs font-bold border border-primary/10 rounded-lg text-center" data-size="1kg" type="button">1kg</button></div>
<div class="flex items-center justify-between"><span class="text-xl font-bold text-primary">$3.760</span><div class="flex gap-1"><button class="p-2.5 border border-[#25D366]/30 text-[#25D366] rounded-lg"><span class="material-symbols-outlined text-sm">chat</span></button></div></div>
</div>
</div>
</div>
<!-- Pagination Placeholder -->
<div class="mt-12 flex justify-center gap-2">
<button class="w-10 h-10 flex items-center justify-center rounded-lg bg-primary text-white font-bold">1</button>
</div>
</div>
</div>
</main>
<div class="fixed inset-0 z-[80] hidden items-center justify-center bg-black/50 p-4" id="yerba-modal">
<div class="w-full max-w-md rounded-xl bg-white p-6 shadow-2xl">
<div class="mb-4 flex items-start justify-between gap-3">
<div>
<p class="text-xs font-bold uppercase tracking-widest text-primary/60">Yerba seleccionada</p>
<h3 class="text-2xl font-extrabold text-primary" id="modal-title">Yerba</h3>
</div>
<button class="rounded-lg border border-primary/20 p-1 text-primary hover:bg-primary/5" id="modal-close" type="button">
<span class="material-symbols-outlined">close</span>
</button>
</div>
<p class="mb-6 text-sm leading-relaxed text-slate-600" id="modal-desc"></p>
<button class="mb-3 inline-flex w-full items-center justify-center gap-2 rounded-lg bg-primary px-4 py-3 text-sm font-bold text-white hover:bg-primary/90" id="modal-add-cart" type="button">
<span class="material-symbols-outlined text-base">add_shopping_cart</span>
Agregar al carrito
</button>
<a class="inline-flex w-full items-center justify-center gap-2 rounded-lg bg-[#25D366] px-4 py-3 text-sm font-bold text-white hover:brightness-110" href="#" id="modal-wa-link" rel="noopener noreferrer" target="_blank">
<span class="material-symbols-outlined text-base">chat</span>
Consultar disponibilidad
</a>
</div>
</div>
<div class="fixed inset-0 z-[85] hidden" id="cart-drawer">
<div class="absolute inset-0 bg-black/40" id="cart-backdrop"></div>
<aside class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl p-6 flex flex-col">
<div class="mb-4 flex items-center justify-between">
<h3 class="text-xl font-extrabold text-primary">Tu carrito</h3>
<button class="rounded-lg border border-primary/20 p-1 text-primary hover:bg-primary/5" id="cart-close" type="button">
<span class="material-symbols-outlined">close</span>
</button>
</div>
<div class="flex-1 overflow-auto space-y-3" id="cart-items"></div>
<div class="mt-5 border-t border-primary/10 pt-4">
<a class="inline-flex w-full items-center justify-center gap-2 rounded-lg bg-[#25D366] px-4 py-3 text-sm font-bold text-white hover:brightness-110" href="#" id="cart-quote-btn" rel="noopener noreferrer" target="_blank">
<span class="material-symbols-outlined text-base">chat</span>
Pedir cotización
</a>
</div>
</aside>
</div>
<footer class="bg-white dark:bg-background-dark border-t border-primary/10 py-12 mt-20">
<div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8">
<div class="space-y-4">
<div class="flex items-center">
<img alt="MateYa!" class="h-10 w-auto" src="assets/logo-mateya.svg"/>
</div>
<p class="text-sm text-primary/60 leading-relaxed">Expertos en la cultura del mate. Llevamos las mejores yerbas del campo a tu hogar, garantizando frescura y calidad artesanal.</p>
</div>
<div>
<h4 class="font-bold text-primary mb-4">Explorar</h4>
<ul class="text-sm space-y-2 text-primary/60">
<li><a class="hover:text-primary" href="catalogo.html">Catálogo Completo</a></li>
<li><a class="hover:text-primary" href="catalogo.html">Nuestras Marcas</a></li>
<li><a class="hover:text-primary" href="catalogo.html">Accesorios</a></li>
<li><a class="hover:text-primary" href="packs.html">Gift Cards</a></li>
</ul>
</div>
<div>
<h4 class="font-bold text-primary mb-4">Soporte</h4>
<ul class="text-sm space-y-2 text-primary/60">
<li><a class="hover:text-primary" href="faq.html">Preguntas Frecuentes</a></li>
<li><a class="hover:text-primary" href="faq.html">Métodos de Envío</a></li>
<li><a class="hover:text-primary" href="faq.html">Políticas de Devolución</a></li>
<li><a class="hover:text-primary" href="https://api.whatsapp.com/send?text=Hola%20MateYa!%20Quiero%20hacer%20una%20consulta" rel="noopener noreferrer" target="_blank">Contacto</a></li>
</ul>
</div>
<div>
<h4 class="font-bold text-primary mb-4">Suscríbete</h4>
<p class="text-xs text-primary/60 mb-4">Recibe ofertas exclusivas y novedades sobre el mundo del mate.</p>
<div class="flex gap-2">
<input class="flex-1 bg-primary/5 border-none rounded-lg text-xs" placeholder="Email" type="email"/>
<button class="bg-primary text-white p-2 rounded-lg hover:bg-primary/90 transition-colors">
<span class="material-symbols-outlined">send</span>
</button>
</div>
</div>
</div>
<div class="max-w-7xl mx-auto px-4 border-t border-primary/5 mt-12 pt-8 text-center text-xs text-primary/40">
<p>© 2024 MateYa! Todos los derechos reservados. Hecho con amor por el mate.</p>
</div>
</footer>
<script>
  (function () {
    var STORAGE_KEY = "mateya_cart_v1";
    var cards = document.querySelectorAll(".yerba-card");
    var grid = document.getElementById("catalog-grid");
    var gridBtn = document.getElementById("grid-view-btn");
    var listBtn = document.getElementById("list-view-btn");
    var modal = document.getElementById("yerba-modal");
    var modalTitle = document.getElementById("modal-title");
    var modalDesc = document.getElementById("modal-desc");
    var modalClose = document.getElementById("modal-close");
    var modalWa = document.getElementById("modal-wa-link");
    var modalAddCart = document.getElementById("modal-add-cart");
    var cartButton = document.getElementById("cart-button");
    var cartCount = document.getElementById("cart-count");
    var cartDrawer = document.getElementById("cart-drawer");
    var cartBackdrop = document.getElementById("cart-backdrop");
    var cartClose = document.getElementById("cart-close");
    var cartItems = document.getElementById("cart-items");
    var cartQuoteBtn = document.getElementById("cart-quote-btn");
    var activeCard = null;

    if (!cards.length || !modal || !modalTitle || !modalDesc || !modalClose || !modalWa || !modalAddCart || !grid || !gridBtn || !listBtn || !cartButton || !cartCount || !cartDrawer || !cartBackdrop || !cartClose || !cartItems || !cartQuoteBtn) return;

    function getCart() {
      try {
        var raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : [];
      } catch (error) {
        return [];
      }
    }

    function saveCart(items) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
    }

    function getSelectedSize(card) {
      var activeSize = card.querySelector(".size-btn.bg-primary\\/10");
      if (activeSize) return activeSize.getAttribute("data-size") || "500gr";
      return "500gr";
    }

    function addToCart(item) {
      var items = getCart();
      var existing = items.find(function (entry) {
        return entry.type === item.type && entry.name === item.name && entry.size === item.size;
      });
      if (existing) existing.qty += 1;
      else items.push(item);
      saveCart(items);
      renderCart();
    }

    function renderCart() {
      var items = getCart();
      var totalQty = items.reduce(function (sum, item) { return sum + (item.qty || 0); }, 0);
      cartCount.textContent = String(totalQty);

      if (!items.length) {
        cartItems.innerHTML = '<p class="text-sm text-slate-500">Todavía no agregaste productos o combos.</p>';
        cartQuoteBtn.href = "https://wa.me/5491136692718?text=" + encodeURIComponent("Hola! Quiero solicitar una cotización.");
        return;
      }

      cartItems.innerHTML = items.map(function (item, idx) {
        var detail = item.type === "combo"
          ? ((item.detail || "Combo") + (item.price ? " - " + item.price : ""))
          : ((item.size || "") + (item.price ? " - " + item.price : ""));
        return '<div class="rounded-lg border border-primary/10 p-3">' +
          '<p class="text-sm font-bold text-primary">' + item.name + '</p>' +
          '<p class="text-xs text-slate-500">' + detail + '</p>' +
          '<div class="mt-2 flex items-center justify-between">' +
          '<span class="text-xs font-semibold text-slate-600">Cantidad: ' + item.qty + '</span>' +
          '<button class="text-xs text-red-600 hover:underline" data-remove-index="' + idx + '" type="button">Quitar</button>' +
          '</div></div>';
      }).join("");

      var message = "Hola! Quiero pedir cotización de:\n" + items.map(function (item) {
        var detail = item.type === "combo"
          ? ((item.detail || "Combo") + (item.price ? " (" + item.price + ")" : ""))
          : ((item.size || "") + (item.price ? " (" + item.price + ")" : ""));
        return "- " + item.qty + "x " + item.name + " - " + detail;
      }).join("\n");
      cartQuoteBtn.href = "https://wa.me/5491136692718?text=" + encodeURIComponent(message);
    }

    function closeModal() {
      modal.classList.add("hidden");
      modal.classList.remove("flex");
    }

    function openModalFromCard(card) {
      activeCard = card;
      var yerba = card.getAttribute("data-yerba") || "Yerba";
      var desc = card.getAttribute("data-desc") || "";
      var size = getSelectedSize(card);
      modalTitle.textContent = yerba;
      modalDesc.textContent = desc + " Tamaño seleccionado: " + size + ".";
      modalWa.href = "https://wa.me/5491136692718?text=" + encodeURIComponent("Hola! Quiero consultar disponibilidad de " + yerba + " en " + size + ".");
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }

    cards.forEach(function (card) {
      card.addEventListener("click", function () {
        openModalFromCard(card);
      });
    });

    // Inserta botón de agregar al carrito en cada card (junto al botón de chat).
    cards.forEach(function (card) {
      var actions = card.querySelector(".flex.gap-1");
      if (!actions || actions.querySelector(".add-cart-btn")) return;
      var addBtn = document.createElement("button");
      addBtn.type = "button";
      addBtn.className = "add-cart-btn p-2.5 border border-primary/20 text-primary rounded-lg hover:bg-primary/5";
      addBtn.innerHTML = '<span class="material-symbols-outlined text-sm">add_shopping_cart</span>';
      actions.insertBefore(addBtn, actions.firstChild);
    });

    modalClose.addEventListener("click", closeModal);
    modal.addEventListener("click", function (event) {
      if (event.target === modal) closeModal();
    });

    document.querySelectorAll(".yerba-card button").forEach(function (button) {
      button.addEventListener("click", function (event) {
        event.stopPropagation();
        var card = button.closest(".yerba-card");
        if (button.classList.contains("size-btn")) {
          var sizeButtons = card.querySelectorAll(".size-btn");
          sizeButtons.forEach(function (entry) {
            entry.classList.remove("bg-primary/10", "text-primary", "border-primary");
            entry.classList.add("border-primary/10");
          });
          button.classList.add("bg-primary/10", "text-primary", "border-primary");
          button.classList.remove("border-primary/10");
          return;
        }
        if (button.classList.contains("add-cart-btn")) {
          if (!card) return;
          var name = card.getAttribute("data-yerba") || "Yerba";
          var size = getSelectedSize(card);
          var priceNode = card.querySelector(".text-xl.font-bold.text-primary");
          var price = priceNode ? priceNode.textContent.trim() : "";
          addToCart({ type: "yerba", name: name, size: size, qty: 1, price: price });
          button.classList.add("bg-primary/10");
          setTimeout(function () {
            button.classList.remove("bg-primary/10");
          }, 400);
          return;
        }
        if (card) openModalFromCard(card);
      });
    });

    modalAddCart.addEventListener("click", function () {
      if (!activeCard) return;
      var name = activeCard.getAttribute("data-yerba") || "Yerba";
      var size = getSelectedSize(activeCard);
      var priceNode = activeCard.querySelector(".text-xl.font-bold.text-primary");
      var price = priceNode ? priceNode.textContent.trim() : "";
      addToCart({ type: "yerba", name: name, size: size, qty: 1, price: price });
      closeModal();
    });

    cartButton.addEventListener("click", function () {
      renderCart();
      cartDrawer.classList.remove("hidden");
    });
    cartClose.addEventListener("click", function () { cartDrawer.classList.add("hidden"); });
    cartBackdrop.addEventListener("click", function () { cartDrawer.classList.add("hidden"); });

    cartItems.addEventListener("click", function (event) {
      var target = event.target;
      var idx = target && target.getAttribute("data-remove-index");
      if (idx === null || idx === undefined) return;
      var items = getCart();
      items.splice(Number(idx), 1);
      saveCart(items);
      renderCart();
    });

    function setActiveView(view) {
      var isList = view === "list";
      grid.classList.toggle("sm:grid-cols-2", !isList);
      grid.classList.toggle("lg:grid-cols-3", !isList);
      grid.classList.toggle("grid-cols-1", isList);

      cards.forEach(function (card) {
        var media = card.querySelector(".h-40");
        var content = card.querySelector(".p-4");
        card.classList.toggle("md:flex", isList);
        card.classList.toggle("md:items-stretch", isList);
        if (media) {
          media.classList.toggle("md:w-56", isList);
          media.classList.toggle("md:flex-shrink-0", isList);
        }
        if (content) {
          content.classList.toggle("md:flex-1", isList);
        }
      });

      gridBtn.classList.toggle("bg-primary/5", !isList);
      gridBtn.classList.toggle("text-primary", !isList);
      gridBtn.classList.toggle("text-primary/40", isList);

      listBtn.classList.toggle("bg-primary/5", isList);
      listBtn.classList.toggle("text-primary", isList);
      listBtn.classList.toggle("text-primary/40", !isList);
    }

    gridBtn.addEventListener("click", function () { setActiveView("grid"); });
    listBtn.addEventListener("click", function () { setActiveView("list"); });
    renderCart();
  })();
</script>
</body></html>




